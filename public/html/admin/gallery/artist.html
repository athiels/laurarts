<h1 class="artistName"></h1>
<div id="galleryContainer"></div>

<script>

    load("galleryContainer", "/gallery/gallery");

    var artist_id = getUrlParam("id");
    var lang = getLocalStorage("language");
    var artistName;

    // Fill artist name
    getData("/api/artist?id=" + artist_id, data => {
        artistName = data.fixed.name;
        $(".artistName").html(artistName);
    });

    getData(
        "/api/galleryitem?artist_id=" + artist_id,
        function (data) {
            if (!data) return console.log("No data");
            console.log(data);
            data.forEach(galleryItem => {

                if (!galleryItem.thumbnail || !galleryItem.photo) return;
                // if (galleryItem.data.show == "false") return;

                let title = (artistName ? artistName : "");
                title += (artistName && galleryItem.data.name ? " - " : "");
                title += (galleryItem.data.name ? galleryItem.data.name : "");

                var html = '<a ';
                html += 'href="/img/uploads/' + getImageFilename(galleryItem.photo) + '"';
                html += 'alt="' + title + '"';
                html += 'data-size="' + galleryItem.photo.metadata.width + 'x' + galleryItem.photo.metadata.height + '"';
                html += 'data-med="/img/uploads/' + getImageFilename(galleryItem.photo) + '"';
                html += 'data-med-size="' + galleryItem.photo.metadata.width + 'x' + galleryItem.photo.metadata.width + '">';
                var alt = galleryItem.data.name ? galleryItem.data.name : getImageFilename(galleryItem.thumbnail);
                html += '<img src="/img/uploads/' + getImageFilename(galleryItem.thumbnail) + '" alt="' + title + '" title="Klik voor grotere weergave"/>';
                html += '<figure>';
                html += '<span>' + title + "</span>";
                html += '<br>';
                if (galleryItem.data.width && galleryItem.data.height) html += galleryItem.data.width + ' x ' + galleryItem.data.height;
                if (galleryItem.data.price) html += " | â‚¬ " + galleryItem.data.price + "<br>";
                html += '</figure>';
                html += '</a>';

                $(".gallery").append(html);
            });

            initGallery();
        }, function (err) { console.log(err); }
    );
</script>